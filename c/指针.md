# 指针与数组

# 定义:
指针是能够存放一个地址的一组存储单元(2或4个字节)

# 符号
- `&` 可用于去一个对象的地址, 只能应用于对象和数组元素
- `*` 间接寻址或间接引用运算符, 当它作用于指针是, 访问指针指向的对象

### 声明指针
```
int *p;
```

1. 指针ip 指向整形变量, x可以在出现的任何上下文中都可以使用*ip
2. `*` `&` 优先级比算数运算 高, (*ip)++
3. 指针也是变量, 在程序中可以直接使用
```
ip = pi
// 将 pi 中的值拷贝到 ip 中, 这样指针 ip 也将指向的 pi 指向的对象
```

## 指针与数组
```
int *pa;
```

1. 如果 pa 指向数组中的某个特定元素, 那么pa+1将指向下一个元素
2. 数组类型的 `变量或表达式` 的值是该数组第 0 个元素的地址, (数组名代表的是该数组最开始的一个元素的地址)
```
a = [1,2,3,4];
a[i] 等价于 *(a+1)
```
3. 数组名和指针之间有一个不同之处, 指针是一个变量 `pa = a` , `pa++` 是合法的, 但是数组名不是变量, `a = pa`, `a++` 是非法的;
4. 当把数组名传递给一个函数的时候, 实际上传递的是第一个元素的地址, 在被调用函数中, 该参数是一个局部变量, 因此数组名参数必须是一个指针, 存储地址值的变量

## 地址运算符
1. 0永远不是有效的数据地址, 将指针赋值为0, 或指针与0之间的比较运算
2. 指向相同数组中元素的两个指针的减法或比较运算
3. 指针可以和整数进行加减运算
4. 有效指针运算包括相同类型之间的赋值运算

## 指针数组, 指向指针的指针
> 高效, 方便处理可变长度文本行的数据表示方法, 节约指向, 移动指针变量的值比移动字符串所花的时间更好, 效率更高.

#### 指针数组定义:
一个数组, 其元素均为指针类型数据, 该数组成为指针数组, 就是说数组中的每一个元素相当于一个指针变量, 他的值都是地址, 定义形式为:

`类型名 *数组名[数组长度]`

`int *p[4]`

例子:
```

#include <stdio.h>
#include <string.h>

void sort(char *name[], int n);

int main(int argc, const char * argv[]) {
//    声明指针数组, name[] 是指针数组, name[0] 指向字符串 "Hello"
//    char *name[] = {"Hello", "World", "Apple", "Demo"};
//    char * name = "hello";

//    printf("%p\n", name);
//    printf("%p\n", name[0]);
//    printf("%p", &name[0]);

    int n = 4, i;

    sort(name, n);
    for (i = 0; i < 4; i++) {
        printf("%s ", name[i]);
    }

    printf("\n");
    return 0;
}

// 自然排序
void sort(char *name[], int n)
{
    void swap(char *arr[], int i, int j);

    int i, j;

    for (i = 0; i < n - 1; i++) {
        for (j = i+1; j < n; j++) {
            if( strcmp(name[i], name[j]) > 0){
                swap(name, i, j);
            }
        }
    }
}

// 交换数组中两个元素的位置
void swap(char *arr[], int i, int j)
{
    char *temp;

    temp   = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}
```

## 指向指针的指针
#### 指针的指针定义:

一个指针变量中存放的是一个指针变量的指针, 那么这个指针变量就是指向指针变量的指针变量

#### 示例:
```
#include <stdio.h>

int main(int argc, const char * argv[]) {

    // 声明指向指针的指针
    int **p;

    char *name[] = {"Hello", "world", "!", ";"};

    for (p = name; p < name + 4; p++) {
        printf("%s\n", *p);
    }

    printf("\n");
    return 0;
}
```

## 多维数组
#### 二维数组定义:
一种特殊的一维数组,每个元素也是一个以为数组, 作为参数, 列数必须指定

#### 声明:
```
f(int [2][13]){}

f(int [][13]){}

f(int (*arr)[13]){}
```

## 复杂声明

#### 修饰符
-  `*` 暗示声明一个指针
-  `()` 暗示声明一个函数
-  `[]` 暗示声明一个数组

#### 法则

1. 离名字越近的修饰符优先级越高
2. `[]` , `()`优先级比 `*` 高
3. 用`()` 括起来的表达式的优先级最高

#### 示例

- `int board[8][8];` 8*8 二维数组
- `int **p` 指向指针的指针
- `int *arr[10]` 10个元素的指针数组, 元素对象是指针
- `int (*p)10` 一个指针, 指向10个元素的数组
- `int *oof[3][4]` 3个元素的指针数组, 每个元素是一个指针, 每个指针指向4个元素的数组
- `int (*oof)[3][4]` 一个指针指向3*4数组

```
int *f[3]()
3个元素的指针数组, 每个元素是指向函数的指针, 每个函数返回 int

int *func()[3]
func是函数,返回指针指向3个元素的数组
```

#### 非法示例
```
int func(void)[5]
C语言返回值不能为数组

int func[5](void)
func是一个具有5个元素的数组, 这个数组的元素都是函数,
数组的每个元素出了类型必须一样外, 每个元素所占用的内存空间也必须相同

```















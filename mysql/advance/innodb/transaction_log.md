---
title: innodb事物日志_配置日志文件大小_
description: 
keywords:
author: douyacun
date: 2019-01-16
---

- innodb 事物日志



# innodb事物日志

innodb使用事物减少提交事物时的开销，因为日志中已经记录，就无需在事物提交时把脏块刷新到 磁盘中，事物的修改的数据和索引通常映射到表空间的随机位置，刷新这些变更到磁盘需要很多的随机i/o

innodb使用日志把随机i/o变成顺序i/o,日志一旦安全写入到磁盘，事物就持久化了，即使发生故障，mysql也可以通过事物日志，恢复已提交的事物

innodb最后还是要把日志写入到磁盘，因为日志有固定的大小，日志是采用环形的方式写的，当日志写到尾部时，会重新跳转到开头写，但不会覆盖还没刷新到磁盘的日志记录

当innodb变更任何数据时，会写一条变更记录到内存缓冲区，以下三种情况有一种发生，innodb都会刷写缓冲区的内容到磁盘日志文件：
- 缓冲区满的时候
- 事物提交
- 每一秒

通常不需要把缓冲区`innodb_log_buffer_size`设置的非常大，推荐范围是1~8m
---

---

  * SSL|TLS协议

# 基本运行过程
- 客户端向服务端所要并验证公钥
- 双方协商生成对话密钥
> 前面这两步是握手阶段，使用明文通信的
- 双方采用“对话密钥”进行加密通信

# 详细过程

## 客户端发出请求
1. 支持的协议版本，eg. TLS 1.0
2. 一个客户端生成的随机数，稍后用于对称密钥
3. 支持的加密算法，比如RSA公钥加密
4. 支持的压缩算法

## 服务器回应 
1. 确认使用的加密通信协议版本，TLS1.0， 如果服务器支持的版本不一致，服务器关闭加密通信
2. 一个服务器生成的随机数，稍后用于生成“对话密钥”
3. 确认使用的加密方法
4. 服务器证书
5. 服务器需要确认客户端的身份，就会在包含一项请求，要求客户端提供 “客户端证书”

## 客户端回应
1. 一个随机数，该随机数用服务器公钥加密，防止被窃听
2. 编码改变通知，表示随后的信息都将用双方商定的加密方法密钥发送
3. 客户端握手结束通知，表示客户端握手阶段已经结束，这一项同时也是前面发送的所有的内容的hash值，用来供服务器校验

## 服务器的最后响应
1. 编码改变通知，随后的信息都将用双方的加密方法和密钥发送
2. 服务器握手结束通知，便是服务器的握手阶段已经结束，这一项同时也是钱敏啊发送的所有内容的hash值，用来供客户端校验

# 私钥的作用
- 生成对话密钥一共需要三个随机数
- 握手之后的对话使用“对话密钥”加密， 服务器的公钥和死要只用于加密和解密“对话密钥”（非对称加密）， 无其他作用
- 服务器公钥放在服务器的数字证书之中
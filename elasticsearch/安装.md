---
Title: elasticsearch在centos下的安装步骤,中文分词ik安装
Keywords: elasticsearch安装步骤,中文分词,ik
Description: 记录一下elasticsearch安装步骤，方便以后有个思路
Author: douyacun
Cover: 
Label: elasticsearch安装
Date: 2019-10-11 13:04:30
LastEditTime: 2019-10-11 22:57:11
---

[TOC]

# 下载和安装步骤

[官方文档](https://www.elastic.co/cn/downloads/elasticsearch)给出的安装步骤是比较详细的 

1. 下载压缩文件
2. Linux运行 bin/elasticsearch Windows运行bin\elasticsearch.bat
3. curl http://localhost:9200/

# elasticsearch系统调优
## 文件描述符限制
`/etc/security/limits.conf`
```conf
*               soft    nofile          65536
*               hard    nofile          65536
*               soft    nproc           4096
*               hard    nproc           4096
```
## 启动内存不足
```
Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x0000000085330000, 2060255232, 0) failed; error='Cannot allocate memory' (errno=12)
#
# There is insufficient memory for the Java Runtime Environment to continue.
# Native memory allocation (mmap) failed to map 2060255232 bytes for committing reserved memory.
# An error report file with more information is saved as:
# /data/elasticsearch-5.2.2/hs_err_pid26945.log
```
vim config/jvm.options

-Xms/-Xmx 设置成同等大小

-Xmx 不要超过内存的50%，不要超过30G

## 不能以root启动
这个就新增一个用户
```
useradd www
sudo su www
./elasticsearch/bin/elasticsearch
```

# 插件
下载[analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik/releases)，注意要和es版本对应

```shell
./elasticsearch/bin/elasticsearch-plugin install file:///home/www/elasticsearch-analysis-ik-7.4.0.zip
```
这里走的是本地file协议，和走http一样，GitHub访问超级慢，所以提前下载下来，本地file协议安装比较快